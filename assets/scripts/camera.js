import{historyIsOpen as t}from"./storage.js";import{isTicketCurrentlyDisplayed as n}from"./ticket.js";import{state as a}from"./main2d.js";let r,o,i=0,s=0,d=0,c=0;const u=130,l="radial-gradient(circle at center, rgba(0, 0, 0, 0) 10%, rgba(0, 0, 0, 1))",m="linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.93))";function g(e){c+=1,t()||n()||!a.controls.API.enabled||(c%400==0&&(o.style.background=m,setTimeout(()=>{o.style.background=l,setTimeout(()=>{o.style.background=m,setTimeout(()=>{o.style.background=l,.5<Math.random()||setTimeout(()=>{o.style.background=m,setTimeout(()=>{o.style.background=l},u)},u)},u)},u)},u)),c%2!=0&&(i=e.clientX-window.innerWidth/2,s=e.clientY-window.innerHeight/2,d=i/(window.innerWidth/2)*20,r.forEach(e=>{var t=e.dataset["speedx"],n=e.dataset["speedy"],a=e.dataset["rotation"];e.style.transform=`translateX(calc(-50% 
			+ ${-i*t}px)) translateY(calc(-50% 
			+ ${-s*n}px)) rotateY(${d*a}deg)`})))}window.addEventListener("mousemove",g),document.addEventListener("DOMContentLoaded",function(){r=document.querySelectorAll(".camera"),o=document.querySelector(".vignette");var e=-1!==navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome"),t=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.userAgent.includes("Mac")&&"ontouchend"in document;(e||t)&&window.removeEventListener("mousemove",g)});