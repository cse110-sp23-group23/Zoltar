import{isTicketCurrentlyDisplayed as e,toggleTicketOn as t}from"./ticket.js";import{tellPageLoaded as o}from"./splash.js";import{createFortuneOnTicket as n}from"./fortunes.js";import{flickVignette as r}from"./util.js";import{setControls as c}from"./settings.js";import{playAudio as s,playRandomVoiceLine as i}from"./noise.js";console.log("%cWelcome to %cZoltar%c.live!","","color: red; font-weight: bolder","");const a={responseGenerated:!0,ticketSpawned:!1,controls:{API:{enabled:!1}}};let l={};function d(){return!e()&&!a.ticketSpawned&&l.cover.classList.contains("hidden")}function u(){s("rumble",.3),i(),l.body.classList.add("shake")}function m(){t(),a.ticketSpawned=!1,a.controls.API.enabled=!1}function p(){a.controls.API.enabled=!1,u(),setTimeout(()=>{window.location="https://cse110-sp23-group23.github.io/cse110-sp23-group23/source/8ball/"},800)}function b(e){" "!==e.key&&"eight-ball-container"!==e.target.id||d()&&(a.ticketSpawned=!0,a.responseGenerated=!1,r(),n({callback:()=>{a.responseGenerated=!0}}),u(),setTimeout(m,1e3))}document.addEventListener("DOMContentLoaded",function(){(l={buttons:[document.querySelector("#save-button"),document.querySelector("#discard-button")],cover:document.querySelector(".cover"),body:document.querySelector("body"),eightBall:document.querySelector("#eight-ball-image"),zoltar:document.querySelector("#eight-ball-container")}).eightBall.addEventListener("click",p),l.buttons.forEach(e=>{e.addEventListener("click",()=>{l.body.classList.remove("shake"),a.controls.API.enabled=!0})}),l.zoltar.addEventListener("click",e=>{"eight-ball-container"===e.target.id&&b(e)}),window.addEventListener("keydown",b),o(a.controls),c(a.controls)});export{a as state,d as canTriggerEvent,p as openEightBall};