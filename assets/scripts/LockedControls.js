import{MathUtils as e,Vector3 as i}from"three";export default class{constructor(t,e){this.options={lookSpeed:.001,lonMin:.51,lonMax:.65,latMin:1.68,latMax:1.88},this.object=t,this.domElement=e,this.API={enabled:!0},this.state={autoSpeedFactor:0,pointerX:0,pointerY:0,viewHalfX:0,viewHalfY:0,lat:(this.options.latMin+this.options.latMax)/2,lon:(this.options.lonMin+this.options.lonMax)/2,targetPosition:new i},this.domElement.addEventListener("pointermove",this.onPointerMove.bind(this)),window.addEventListener("resize",this.handleResize.bind(this)),this.handleResize()}onPointerMove(t){this.domElement===document?(this.state.pointerX=t.pageX-this.state.viewHalfX,this.state.pointerY=t.pageY-this.state.viewHalfY):(this.state.pointerX=t.pageX-this.domElement.offsetLeft-this.state.viewHalfX,this.state.pointerY=t.pageY-this.domElement.offsetTop-this.state.viewHalfY)}handleResize(){this.domElement===document?(this.state.viewHalfX=window.innerWidth/2,this.state.viewHalfY=window.innerHeight/2):(this.state.viewHalfX=this.domElement.offsetWidth/2,this.state.viewHalfY=this.domElement.offsetHeight/2)}helperClampLonLat(t){this.state[t]=e.clamp(this.state[t],this.options[t+"Min"],this.options[t+"Max"])}update(t){this.API.enabled&&(t=t*this.options.lookSpeed,this.state.lon-=this.state.pointerX*t,this.state.lat+=this.state.pointerY*t,this.helperClampLonLat("lon"),this.helperClampLonLat("lat"),this.state.targetPosition.setFromSphericalCoords(1,this.state.lat,this.state.lon),this.state.targetPosition.add(this.object.position),this.object.lookAt(this.state.targetPosition))}}